#!/usr/bin/env node
var logger = require('loge');
var commands = require('./commands');

var yargs = require('yargs')
  .usage('Usage: $0 -f ScienceArticle.pdf [-s col1]')
  .describe({
    filename: 'pdf file to open',
    // extraction targets
    sections: 'page sections to extract',
    // cli meta
    help: 'print this help message',
    verbose: 'print extra output',
  })
  .alias({
    filename: 'f',
    sections: 's',
    verbose: 'v',
  })
  .demand(['filename'])
  .boolean(['help', 'verbose']);

var argv = yargs.argv;
logger.level = argv.verbose ? 'debug' : 'error';

if (argv.help) {
  yargs.showHelp();
}
else if (argv.version) {
  console.log(require('../package').version);
}
else {
  commands.extract(argv.filename, [].concat(argv.sections));
}
